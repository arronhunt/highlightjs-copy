class CopyButtonPlugin{constructor(options={}){self.hook=options.hook;self.callback=options.callback;self.copyLabel=options.copyLabel?options.copyLabel:"Copy";self.copiedLabel=options.copiedLabel?options.copiedLabel:"Copied!";self.alertLabel=options.alertLabel?options.alertLabel:"Copied to clipboard"}"after:highlightElement"({el,text}){let button=Object.assign(document.createElement("button"),{innerHTML:self.copyLabel,className:"hljs-copy-button"});button.dataset.copied="false";el.parentElement.classList.add("hljs-copy-wrapper");el.parentElement.appendChild(button);el.parentElement.style.setProperty("--hljs-theme-background",window.getComputedStyle(el).backgroundColor);button.onclick=function(){if(!navigator.clipboard)return;let newText=text;if(hook&&typeof hook==="function"){newText=hook(text,el)||text}navigator.clipboard.writeText(newText).then(function(){button.innerHTML=self.copiedLabel;button.dataset.copied="true";let alert=Object.assign(document.createElement("div"),{role:"status",className:"hljs-copy-alert",innerHTML:self.alertLabel});el.parentElement.appendChild(alert);setTimeout(()=>{button.innerHTML=self.copyLabel;button.dataset.copied="false";el.parentElement.removeChild(alert);alert=null},2e3)}).then(function(){if(typeof callback==="function")return callback(newText,el)})}}}